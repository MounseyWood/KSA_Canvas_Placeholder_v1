<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Text Camouflage</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/papaparse/5.3.0/papaparse.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #000000;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background-color: #FFF200;
            overflow: hidden;
        }
        
        .text-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 10px;
            box-sizing: border-box;
            line-height: 1.2;
        }
        
        .word {
            display: inline-block;
            margin-right: 5px;
            color: #000000;
            cursor: pointer;
            transition: color 0.2s, font-weight 0.2s;
        }
        
        .word:hover {
            color: #FFFFFF;
            font-weight: bold;
        }
        
        .silhouette {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .footer {
            position: absolute;
            bottom: 10px;
            width: 100%;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
        }
        
        .footer div {
            background-color: rgba(255, 255, 255, 0.7);
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .logo {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container" id="container">
        <div class="text-layer" id="textLayer"></div>
        <div class="silhouette" id="silhouette"></div>
        <div class="logo">INTERACTIVE DEMO</div>
        <div class="footer">
            <div>COMPANY</div>
            <div>SPONSOR</div>
            <div>BRAND</div>
            <div>PARTNER</div>
        </div>
    </div>

    <script>
        // We'll load words from the CSV file
        let words = [];
        let wordsLoaded = false;

        // Function to load words from CSV
        async function loadWordsFromCSV() {
            try {
                const response = await window.fs.readFile('words.csv', { encoding: 'utf8' });
                const parsedData = Papa.parse(response, {
                    header: true,
                    skipEmptyLines: true
                });
                
                // Extract words from the parsed data
                words = parsedData.data.map(row => row.word || Object.values(row)[0]).filter(word => word);
                
                // If no words were found or loaded properly, use some default fashion brands
                if (words.length === 0) {
                    words = ["Prada", "Gucci", "YSL", "Dior", "Phoebe Philo", "Roland Mouret", 
                             "Paul Smith", "Dunhill", "Vivienne Westwood", "Jigsaw", "Toast", 
                             "H&M", "Hugo Boss", "ZARA", "Tommy Hilfiger", "Timberland", 
                             "Lululemon", "Adidas", "Nike", "Gymshark", "Reiss", "Kestin", 
                             "Oliver Spencer", "Dries van Noten", "Martin Margiela", "Donna Karan",
                             "Ralph Lauren", "Calvin Klein", "Armani", "Lacoste", "All Saints", 
                             "COS", "ASOS"];
                }
                
                wordsLoaded = true;
                console.log("Words loaded from CSV:", words.length);
                
                // Now create the text pattern
                createTextPattern();
                createSilhouette();
                addInteractivity();
            } catch (error) {
                console.error("Error loading CSV:", error);
                words = ["Prada", "Gucci", "YSL", "Dior", "Phoebe Philo", "Roland Mouret", 
                         "Paul Smith", "Dunhill", "Vivienne Westwood", "Jigsaw", "Toast", 
                         "H&M", "Hugo Boss", "ZARA", "Tommy Hilfiger", "Timberland", 
                         "Lululemon", "Adidas", "Nike", "Gymshark", "Reiss", "Kestin", 
                         "Oliver Spencer", "Dries van Noten", "Martin Margiela", "Donna Karan",
                         "Ralph Lauren", "Calvin Klein", "Armani", "Lacoste", "All Saints", 
                         "COS", "ASOS"];
                wordsLoaded = true;
                
                // Create the text pattern even if there was an error
                createTextPattern();
                createSilhouette();
                addInteractivity();
            }
        }

        // Function to generate random words
        function getRandomWord() {
            return words[Math.floor(Math.random() * words.length)];
        }

        // Function to get random font weight
        function getRandomWeight() {
            const weights = [300, 400, 500, 600, 700];
            return weights[Math.floor(Math.random() * weights.length)];
        }

        // Function to create text pattern
        function createTextPattern() {
            const textLayer = document.getElementById('textLayer');
            let content = '';
            
            // Generate enough words to fill the screen
            for (let i = 0; i < 2000; i++) {
                content += `<span class="word" style="font-weight: ${getRandomWeight()}">${getRandomWord()}</span>`;
            }
            
            textLayer.innerHTML = content;
        }

        // Create silhouette shapes
        function createSilhouette() {
            const silhouette = document.getElementById('silhouette');
            const container = document.getElementById('container');
            const width = container.offsetWidth;
            const height = container.offsetHeight;
            
            // Create SVG for the silhouette
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute("width", "100%");
            svg.setAttribute("height", "100%");
            svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
            
            // Create a path for an animal-like silhouette
            const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
            
            // Create a simple animal silhouette - this is a generic shape, not copying any specific design
            const centerX = width / 2;
            const centerY = height / 2;
            const size = Math.min(width, height) * 0.6;
            
            // Generate random points for the silhouette
            let pathData = `M ${centerX},${centerY - size/3}`;
            
            for (let angle = 0; angle < Math.PI * 2; angle += 0.1) {
                const radius = size * (0.5 + Math.random() * 0.5);
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                pathData += ` L ${x},${y}`;
            }
            
            pathData += " Z";
            
            path.setAttribute("d", pathData);
            path.setAttribute("fill", "none");
            path.setAttribute("stroke", "rgba(0,0,0,0.05)");
            path.setAttribute("stroke-width", "150");
            path.setAttribute("stroke-linejoin", "round");
            
            svg.appendChild(path);
            silhouette.appendChild(svg);
        }

        // Add interactivity
        function addInteractivity() {
            const words = document.querySelectorAll('.word');
            
            words.forEach(word => {
                word.addEventListener('mouseover', () => {
                    // Random chance of triggering nearby words for a "ripple" effect
                    if (Math.random() < 0.3) {
                        const nearbyWords = Array.from(words).filter(() => Math.random() < 0.05);
                        nearbyWords.forEach(nearby => {
                            nearby.style.color = '#FFFFFF';
                            setTimeout(() => {
                                nearby.style.color = '#000000';
                            }, 500 + Math.random() * 1000);
                        });
                    }
                });
                
                word.addEventListener('click', () => {
                    // Create a ripple effect on click
                    const rippleEffect = () => {
                        const nearbyWords = Array.from(words).filter(() => Math.random() < 0.1);
                        nearbyWords.forEach(nearby => {
                            nearby.style.color = '#FFFFFF';
                            setTimeout(() => {
                                nearby.style.color = '#000000';
                            }, 200 + Math.random() * 800);
                        });
                    };
                    
                    // Create multiple ripples
                    for (let i = 0; i < 5; i++) {
                        setTimeout(rippleEffect, i * 100);
                    }
                });
            });
            
            // Add mouse movement effect
            document.addEventListener('mousemove', (e) => {
                const x = e.clientX;
                const y = e.clientY;
                
                // Find words near the cursor
                words.forEach(word => {
                    const rect = word.getBoundingClientRect();
                    const wordX = rect.left + rect.width / 2;
                    const wordY = rect.top + rect.height / 2;
                    
                    const distance = Math.sqrt(Math.pow(x - wordX, 2) + Math.pow(y - wordY, 2));
                    
                    if (distance < 100) {
                        const intensity = 1 - distance / 100;
                        word.style.fontWeight = Math.floor(400 + intensity * 300);
                    }
                });
            });
        }

        // Initialize the pattern
        window.onload = function() {
            // Load words from CSV first, then create the pattern
            loadWordsFromCSV();
            
            // Add window resize handler
            window.addEventListener('resize', () => {
                if (wordsLoaded) {
                    document.getElementById('silhouette').innerHTML = '';
                    createSilhouette();
                }
            });
        };
    </script>
</body>
</html>
